<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
<h2>Visualizations of the Biolink Categories</h2>
<div>
    <button class="active"><a href="categories.html">Categories</a></button>
    <button><a href="predicates.html">Predicates</a></button>
    <button><a href="aspects.html">Aspects</a></button>
    <button><a href="https://biolink.github.io/biolink-model">Back to Documentation</a></button>
</div>

<div>
    <!-- Thank you to https://bl.ocks.org/d3noob/8375092 for the tree visualization code -->
    <!-- Adapted from Amy Glen’s visualizations of Biolink https://github.com/amykglen/tree-viz-biolink -->
    <!-- load the d3.js library -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script>
        d3.json("categories.json", function (error, jsonData) {
            if (error) {
                console.log("Error loading JSON data:", error);
                return;
            }
            var treeData = jsonData;

            // ... existing code for setting up the diagram ...

            function update(source) {
                // ... existing code for updating nodes and links ...

                // Update the nodes…
                var node = svg.selectAll("g.node")
                    .data(nodes, function (d) { return d.id || (d.id = ++i); });

                // Enter any new nodes at the parent's previous position.
                var nodeEnter = node.enter().append("g")
                    .attr("class", "node")
                    .attr("transform", function (d) {
                        return "translate(" + source.y0 + "," + source.x0 + ")";
                    })
                    .on("click", click);

                // ... existing code for appending circles to nodes ...

                nodeEnter.append("text")
                    .attr("x", function (d) { return d.children || d._children ? -6 : 6; })
                    .attr("dy", ".35em")
                    .attr("text-anchor", function (d) { return d.children || d._children ? "end" : "start"; })
                    .each(function(d) {
                        function toCamelCase(str) {
                            return str.replace(/([-_][a-z])/g, (group) => group.toUpperCase()
                                .replace('-', '')
                                .replace('_', ''));
                        }

                        var nodeText = d3.select(this);
                        nodeText.text(toCamelCase(d.name));

                        // Append an anchor tag to nodeText
                        var link = nodeText.append("a")
                            .attr("class", "md-link")  // Class for styling
                            .attr("xlink:href", d.name)  // Set the hyperlink reference
                            .attr("target", "_blank");   // Open in a new tab

                        // Append a FontAwesome icon to the link
                        link.append("text")
                            .attr('font-family', 'FontAwesome')
                            .text('\uf35d');  // Unicode for 'external-link-alt' icon
                    })
                    .style("fill-opacity", 1e-6);

                // ... existing code for node update, node exit, link update, etc. ...

            }

            // ... existing click function and other code ...

        });
    </script>
</div>
</body>
</html>